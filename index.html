<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <meta name="author" content="Francis Hage" />
    <meta
      name="description"
      content="Multiplayer dice room - roll together in real-time"
    />

    <meta name="theme-color" content="#02010f" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Dice Room" />

    <meta property="og:title" content="Steel & Sorcery Dice Room" />
    <meta
      property="og:description"
      content="Multiplayer dice room - roll together in real-time"
    />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="assets/images/favicon.png" />

    <link href="assets/images/favicon.png" rel="icon" type="image/png" />
    <link href="assets/images/favicon.png" rel="apple-touch-icon" />
    <link
      rel="preload"
      href="assets/AtkinsonHyperlegibleNext-Regular.otf"
      as="font"
      type="font/otf"
      crossorigin
    />
    <link
      rel="preload"
      href="assets/AtkinsonHyperlegibleNext-Medium.otf"
      as="font"
      type="font/otf"
      crossorigin
    />
    <link
      rel="preload"
      href="assets/AtkinsonHyperlegibleNext-SemiBold.otf"
      as="font"
      type="font/otf"
      crossorigin
    />
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style type="text/tailwindcss">
      html,
      body {
        overflow-x: hidden;
        max-width: 100vw;
        touch-action: manipulation;
      }

      emoji-buttons,
      dice-pool {
        user-select: none;
      }
      @font-face {
        font-family: 'Atkinson Hyperlegible';
        src: url('assets/AtkinsonHyperlegibleNext-Regular.otf')
          format('opentype');
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: 'Atkinson Hyperlegible';
        src: url('assets/AtkinsonHyperlegibleNext-Medium.otf')
          format('opentype');
        font-weight: 500;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: 'Atkinson Hyperlegible';
        src: url('assets/AtkinsonHyperlegibleNext-SemiBold.otf')
          format('opentype');
        font-weight: 600;
        font-style: normal;
        font-display: swap;
      }
      @theme {
        --color-dice-4: #ffd700;
        --color-dice-6: #dc143c;
        --color-dice-8: #4169e1;
        --color-dice-10: #9370db;
        --color-dice-12: #00ced1;
        --color-dice-20: #f5f5f5;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .animated-gradient {
        background: linear-gradient(270deg, #1a1a1f, #1c1c24, #1e1e28);
        background-size: 400% 400%;
        animation: gradientShift 60s ease infinite;
      }

      .ready,
      .ready a:hover,
      .ready button:hover {
        cursor: none;
      }
      dialog {
        cursor: pointer !important;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        margin: 0;
      }
      dialog * {
        cursor: pointer !important;
      }
    </style>
    <title>Steel & Sorcery Dice Room</title>
  </head>

  <body
    class="min-h-screen animated-gradient text-white text-base sm:text-lg font-['Atkinson_Hyperlegible',sans-serif] overflow-x-hidden"
  >
    <div
      id="canvas"
      class="fixed inset-0 pointer-events-none z-[9999] select-none"
    ></div>
    <div class="p-3 sm:p-6 lg:p-8">
      <header class="p-3 sm:p-4 mb-4 sm:mb-6 lg:mb-8 bg-black/60 rounded-xl">
        <div
          class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3"
        >
          <div class="flex gap-2 sm:gap-3 items-center flex-wrap">
            <button
              id="name-btn"
              title="Change your name"
              class="px-3 py-2 text-sm sm:text-base font-bold text-white rounded-lg cursor-pointer transition-all bg-[#1e3a5f] hover:bg-[#2a4d7f]"
            >
              Username
            </button>
            <button
              id="dice-settings-btn"
              title="Open dice settings"
              class="px-3 py-2 text-sm sm:text-base font-bold text-white rounded-lg cursor-pointer transition-all bg-[#1e3a5f] hover:bg-[#2a4d7f]"
            >
              Customize Dice
            </button>
            <button
              id="create-room-btn"
              title="Create a new room"
              class="px-4 py-2 text-sm sm:text-base font-bold text-white rounded-lg cursor-pointer transition-all bg-[#1e3a5f] hover:bg-[#2a4d7f] sm:hover:-translate-y-1 active:translate-y-0"
            >
              Create Room
            </button>
            <button
              id="faq-btn"
              title="Frequently Asked Questions"
              class="px-3 py-2 text-sm sm:text-base font-bold text-white rounded-lg cursor-pointer transition-all bg-[#1e3a5f] hover:bg-[#2a4d7f]"
            >
              FAQ
            </button>
          </div>
          <div
            class="flex flex-wrap gap-3 sm:gap-4 lg:gap-6 text-xs sm:text-sm lg:text-base text-gray-300 items-center"
          >
            <div id="room-num" class="text-white font-semibold"></div>
            <div id="peer-count">0 peers</div>
          </div>
        </div>
      </header>

      <main
        class="max-w-[1400px] mx-auto grid grid-cols-1 lg:grid-cols-[40%_1fr] gap-4 sm:gap-6 items-start"
      >
        <dice-pool class="w-full flex flex-col gap-4 sm:gap-6">
          <div class="bg-black/40 rounded-xl p-4 sm:p-6 lg:p-8">
            <div class="text-lg sm:text-xl mb-4 sm:mb-6 font-bold text-white">
              Add to Pool:
            </div>
            <div class="flex gap-1.5 sm:gap-2 flex-wrap justify-center">
              <button
                class="dice-type-btn aspect-square w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20 bg-dice-4 text-black border-2 sm:border-[3px] border-black rounded-lg sm:rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] text-lg sm:text-xl lg:text-2xl font-bold hover:-translate-y-1 sm:hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-0.5"
                data-sides="4"
              >
                d4
              </button>
              <button
                class="dice-type-btn aspect-square w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20 bg-dice-6 text-white border-2 sm:border-[3px] border-black rounded-lg sm:rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] text-lg sm:text-xl lg:text-2xl font-bold hover:-translate-y-1 sm:hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-0.5"
                data-sides="6"
              >
                d6
              </button>
              <button
                class="dice-type-btn aspect-square w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20 bg-dice-8 text-white border-2 sm:border-[3px] border-black rounded-lg sm:rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] text-lg sm:text-xl lg:text-2xl font-bold hover:-translate-y-1 sm:hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-0.5"
                data-sides="8"
              >
                d8
              </button>
              <button
                class="dice-type-btn aspect-square w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20 bg-dice-10 text-white border-2 sm:border-[3px] border-black rounded-lg sm:rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] text-lg sm:text-xl lg:text-2xl font-bold hover:-translate-y-1 sm:hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-0.5"
                data-sides="10"
              >
                d10
              </button>
              <button
                class="dice-type-btn aspect-square w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20 bg-dice-12 text-black border-2 sm:border-[3px] border-black rounded-lg sm:rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] text-lg sm:text-xl lg:text-2xl font-bold hover:-translate-y-1 sm:hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-0.5"
                data-sides="12"
              >
                d12
              </button>
              <button
                class="dice-type-btn aspect-square w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20 bg-dice-20 text-black border-2 sm:border-[3px] border-black rounded-lg sm:rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] text-lg sm:text-xl lg:text-2xl font-bold hover:-translate-y-1 sm:hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-0.5"
                data-sides="20"
              >
                d20
              </button>
            </div>
          </div>

          <div
            class="bg-black/40 rounded-xl p-4 sm:p-6 lg:p-8 min-h-[120px] sm:min-h-[150px]"
          >
            <div
              id="pool-summary"
              class="text-lg sm:text-xl lg:text-2xl font-bold text-center py-2 sm:py-3 min-h-[2rem] sm:min-h-[2.8rem] empty:hidden text-white"
            ></div>
            <div
              id="dice-pool"
              class="flex gap-1 flex-wrap min-h-[50px] sm:min-h-[60px] p-3 sm:p-4 bg-black/30 rounded-lg justify-center"
            ></div>
            <button
              id="roll-pool-btn"
              disabled
              class="w-full py-3 sm:py-4 lg:py-5 text-lg sm:text-xl lg:text-2xl font-semibold text-white rounded-lg cursor-pointer transition-colors bg-[#1e3a5f] hover:bg-[#2a4d7f] disabled:bg-black/30 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-black/30"
            >
              Roll Pool
            </button>
          </div>
        </dice-pool>

        <div class="grid gap-3 sm:gap-4 w-full">
          <dice-box
            id="dice-box-container"
            class="bg-black/40 flex items-stretch justify-stretch rounded-xl overflow-hidden h-[350px] lg:h-[450px] w-full"
          >
            <!-- 3D Dice here -->
          </dice-box>
          <div id="roll-history" class="flex flex-col gap-3 sm:gap-4"></div>
        </div>
      </main>

      <emoji-buttons
        class="fixed bottom-4 left-1/2 transform -translate-x-1/2 flex gap-1 sm:gap-2 bg-black/60 rounded-lg p-2 sm:p-3"
      >
        <button
          class="text-2xl sm:text-3xl lg:text-4xl hover:scale-110 sm:hover:scale-125 transition-transform cursor-pointer"
          data-emoji="👍"
        >
          👍
        </button>
        <button
          class="text-2xl sm:text-3xl lg:text-4xl hover:scale-110 sm:hover:scale-125 transition-transform cursor-pointer"
          data-emoji="🎉"
        >
          🎉
        </button>
        <button
          class="text-2xl sm:text-3xl lg:text-4xl hover:scale-110 sm:hover:scale-125 transition-transform cursor-pointer"
          data-emoji="🔥"
        >
          🔥
        </button>
        <button
          class="text-2xl sm:text-3xl lg:text-4xl hover:scale-110 sm:hover:scale-125 transition-transform cursor-pointer"
          data-emoji="😱"
        >
          😱
        </button>
        <button
          class="text-2xl sm:text-3xl lg:text-4xl hover:scale-110 sm:hover:scale-125 transition-transform cursor-pointer"
          data-emoji="💀"
        >
          💀
        </button>
        <button
          class="text-2xl sm:text-3xl lg:text-4xl hover:scale-110 sm:hover:scale-125 transition-transform cursor-pointer"
          data-emoji="❤️"
        >
          ❤️
        </button>
      </emoji-buttons>
    </div>

    <footer
      class="text-center text-xs lg:text-sm text-white bg-black fixed bottom-0 w-screen left-0 max-w-full"
    >
      Diceroom by Steel & Sorcery |
      <a
        target="_blank"
        class="text-[#FF5533]"
        href="https://patreon.com/steelsorcery"
        >Support on Patreon</a
      >
    </footer>
    <!-- Dice Settings Dialog -->
    <dice-settings>
      <dialog
        id="dice-settings-dialog"
        class="bg-black/95 backdrop:bg-black/80 text-white rounded-lg sm:rounded-xl p-4 sm:p-6 max-w-[calc(100vw-2rem)] sm:max-w-2xl w-full border border-white/20 sm:border-2"
      >
        <div class="flex justify-between items-center mb-4 sm:mb-6">
          <h2 class="text-xl sm:text-2xl font-bold">Dice Settings</h2>
          <button
            id="close-dialog-btn"
            class="text-2xl sm:text-3xl leading-none hover:text-red-400 transition-colors"
          >
            &times;
          </button>
        </div>

        <!-- Color Picker -->
        <div class="mb-4 sm:mb-6">
          <label
            class="text-base sm:text-lg font-semibold text-gray-300 block mb-2"
            >Dice Color:</label
          >
          <input
            type="color"
            id="color-picker"
            title="Choose your dice color"
            class="w-full h-10 sm:h-12 rounded-lg cursor-pointer border-2 border-white/30"
          />
        </div>

        <!-- Dice Customization Settings -->
        <div class="mb-4 sm:mb-6">
          <div
            class="text-base sm:text-lg font-semibold text-gray-300 mb-2 sm:mb-3"
          >
            Dice Customization:
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4">
            <div>
              <label class="text-xs sm:text-sm text-gray-400 block mb-1"
                >Label Color:</label
              >
              <input
                id="label-color-picker"
                type="color"
                value="#ffffff"
                class="w-full h-10 rounded cursor-pointer border-2 border-white/30"
              />
            </div>
            <div>
              <label class="text-xs sm:text-sm text-gray-400 block mb-1"
                >Material:</label
              >
              <select
                id="material-select"
                class="w-full bg-black/60 text-white p-2 text-sm sm:text-base rounded border-2 border-white/30"
              >
                <option value="plastic" selected>Plastic</option>
                <option value="glass">Glass</option>
              </select>
            </div>
            <div>
              <label class="text-xs sm:text-sm text-gray-400 block mb-1"
                >Texture:</label
              >
              <select
                id="texture-select"
                class="w-full bg-black/60 text-white p-2 text-sm sm:text-base rounded border-2 border-white/30"
              >
                <option value="">Loading textures...</option>
              </select>
            </div>
          </div>
        </div>
      </dialog>
    </dice-settings>
    <dialog
      id="faq-dialog"
      class="bg-black/95 backdrop:bg-black/80 text-white rounded-lg sm:rounded-xl p-4 sm:p-6 max-w-[calc(100vw-2rem)] sm:max-w-3xl w-full border border-white/20 sm:border-2 max-h-[80vh] overflow-y-auto"
    >
      <div
        class="flex justify-between items-center mb-4 sm:mb-6 sticky top-0 bg-black/95 pb-4"
      >
        <h2 class="text-xl sm:text-2xl font-bold">
          Frequently Asked Questions
        </h2>
        <button
          id="close-faq-btn"
          class="text-2xl sm:text-3xl leading-none hover:text-red-400 transition-colors"
        >
          &times;
        </button>
      </div>

      <div class="space-y-6">
        <div>
          <h3 class="text-lg sm:text-xl font-bold text-blue-300 mb-2">
            How do I share a room with friends?
          </h3>
          <p class="text-sm sm:text-base text-gray-300 leading-relaxed">
            Simply copy the entire URL from your browser's address bar
            (including the #room-name part) and send it to your friends. When
            they visit that URL, they'll join the same room as you are in.
          </p>
        </div>

        <div>
          <h3 class="text-lg sm:text-xl font-bold text-blue-300 mb-2">
            How do dice rolls work?
          </h3>
          <p class="text-sm sm:text-base text-gray-300 leading-relaxed">
            The 3D dice animation is purely visual for fun. The actual roll
            results are calculated using random numbers behind the scenes. Even
            if the dice appear glitched or don't land properly on screen, the
            outcomes shown in the roll history are always valid and random.
          </p>
        </div>

        <div>
          <h3 class="text-lg sm:text-xl font-bold text-blue-300 mb-2">
            How do I customize my dice?
          </h3>
          <p class="text-sm sm:text-base text-gray-300 leading-relaxed">
            Click the "Customize Dice" button to change your dice color, label
            color, material (plastic or glass), and texture. Your settings are
            saved locally and will persist across sessions.
          </p>
        </div>

        <div>
          <h3 class="text-lg sm:text-xl font-bold text-blue-300 mb-2">
            Is there a quick roll shortcut?
          </h3>
          <p class="text-sm sm:text-base text-gray-300 leading-relaxed">
            Right-click any dice type button to instantly clear your pool, add
            that die, and roll it in one action.
          </p>
        </div>

        <div>
          <h3 class="text-lg sm:text-xl font-bold text-blue-300 mb-2">
            How many people can be in a room?
          </h3>
          <p class="text-sm sm:text-base text-gray-300 leading-relaxed">
            There's no hard limit! The app uses peer-to-peer connections, so you
            can have as many players as your connection can handle. You'll see
            cursors and rolls from all connected peers in real-time.
          </p>
        </div>

        <div>
          <h3 class="text-lg sm:text-xl font-bold text-blue-300 mb-2">
            How do I change my display name?
          </h3>
          <p class="text-sm sm:text-base text-gray-300 leading-relaxed">
            Click the "Username" button in the header to change your display
            name. It will be shown to other players in your room and saved for
            your next visit.
          </p>
        </div>
      </div>
    </dialog>

    <script src="bundle.js" type="module"></script>
  </body>
</html>
