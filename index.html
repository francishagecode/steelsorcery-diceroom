<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <meta name="author" content="Dan Motzenbecker" />
    <meta
      name="description"
      content="Multiplayer dice room - roll together in real-time"
    />
    <link href="assets/images/favicon.png" rel="icon" type="image/png" />
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style type="text/tailwindcss">
      @font-face {
        font-family: 'Atkinson Hyperlegible';
        src: url('assets/AtkinsonHyperlegibleNext-Regular.otf') format('opentype');
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: 'Atkinson Hyperlegible';
        src: url('assets/AtkinsonHyperlegibleNext-Medium.otf') format('opentype');
        font-weight: 500;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: 'Atkinson Hyperlegible';
        src: url('assets/AtkinsonHyperlegibleNext-SemiBold.otf') format('opentype');
        font-weight: 600;
        font-style: normal;
        font-display: swap;
      }
      @theme {
        --color-dice-4: #ffd700;
        --color-dice-6: #dc143c;
        --color-dice-8: #4169e1;
        --color-dice-10: #9370db;
        --color-dice-12: #00ced1;
        --color-dice-20: #f5f5f5;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes diceReveal {
        0% {
          transform: scale(0.8) rotate(-10deg);
        }
        50% {
          transform: scale(1.2) rotate(10deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .animated-gradient {
        background: linear-gradient(270deg, #193c49, #02010f);
        background-size: 400% 400%;
        animation: gradientShift 60s ease infinite;
      }

      .ready,
      .ready a:hover,
      .ready button:hover {
        cursor: none;
      }
      dialog {
        cursor: pointer!important;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        margin: 0;
      }
      dialog * {
        cursor: pointer!important;
      }
    </style>
    <title>Steel & Sorcery Dice Room</title>
  </head>
  <body
    class="min-h-screen animated-gradient text-white p-8 text-lg font-['Atkinson_Hyperlegible',sans-serif]"
  >
    <div
      id="canvas"
      class="fixed inset-0 pointer-events-none z-[9999] select-none"
    ></div>
    <header
      class="text-center p-4 mb-8 relative flex justify-between items-center bg-black/60 rounded-xl"
    >
      <div class="flex gap-3 items-center">
        <button
          id="name-btn"
          title="Change your name"
          class="px-4 py-2 text-base font-bold text-white rounded-lg cursor-pointer transition-all bg-[#1e3a5f] hover:bg-[#2a4d7f]"
        >
          Username
        </button>
        <button
          id="dice-settings-btn"
          title="Open dice settings"
          class="px-4 py-2 text-base font-bold text-white rounded-lg cursor-pointer transition-all bg-[#1e3a5f] hover:bg-[#2a4d7f]"
        >
          ⚙️ Dice
        </button>
      </div>
      <div
        class="flex justify-center gap-6 text-base text-gray-300 items-center"
      >
        <div id="room-num" class="text-white font-semibold"></div>
        <div id="peer-count">0 peers connected</div>
      </div>

      <button
        id="create-room-btn"
        title="Create a new room"
        class="px-6 py-3 text-base font-bold text-white rounded-lg cursor-pointer transition-all bg-[#1e3a5f] hover:bg-[#2a4d7f] hover:-translate-y-1 active:translate-y-0"
      >
        + Create Room
      </button>
    </header>

    <!-- Dice Settings Dialog -->
    <dialog id="dice-settings-dialog" class="bg-black/95 backdrop:bg-black/80 text-white rounded-xl p-6 max-w-2xl w-full border-2 border-white/20">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold">Dice Settings</h2>
        <button id="close-dialog-btn" class="text-3xl leading-none hover:text-red-400 transition-colors">&times;</button>
      </div>

      <!-- Color Picker -->
      <div class="mb-6">
        <label class="text-lg font-semibold text-gray-300 block mb-2">Dice Color:</label>
        <input
          type="color"
          id="color-picker"
          title="Choose your dice color"
          class="w-full h-12 rounded-lg cursor-pointer border-2 border-white/30"
        />
      </div>

      <!-- Dice Customization Settings -->
      <div class="mb-6">
        <div class="text-lg font-semibold text-gray-300 mb-3">Dice Customization:</div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label class="text-sm text-gray-400 block mb-1">Label Color:</label>
            <input id="label-color-picker" type="color" value="#ffffff" class="w-full h-10 rounded cursor-pointer border-2 border-white/30" />
          </div>
          <div>
            <label class="text-sm text-gray-400 block mb-1">Material:</label>
            <select id="material-select" class="w-full bg-black/60 text-white p-2 rounded border-2 border-white/30">
              <option value="plastic" selected>Plastic</option>
              <option value="glass">Glass</option>
            </select>
          </div>
          <div>
            <label class="text-sm text-gray-400 block mb-1">Texture:</label>
            <select id="texture-select" class="w-full bg-black/60 text-white p-2 rounded border-2 border-white/30">
              <option value="">Loading textures...</option>
            </select>
          </div>
        </div>
      </div>

    </dialog>

    <main class="max-w-[1400px] mx-auto flex flex-col lg:flex-row gap-6 items-start">
      <dice-pool class="w-full lg:flex-[0_0_40%] flex flex-col gap-6">
        <div class="bg-black/40 rounded-xl p-8">
          <div class="text-xl mb-6 font-bold text-white">Add to Pool:</div>
          <div class="flex gap-1 flex-wrap justify-center">
            <button
              class="dice-type-btn aspect-square w-20 h-20 bg-white/10 border-[3px] border-black/30 rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] p-2 text-dice-4 hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-1"
              data-sides="4"
            >
              <svg viewBox="0 0 100 100" class="w-full h-full pointer-events-none">
                <polygon points="50,15 90,85 10,85" fill="currentColor" stroke="#000" stroke-width="2" />
                <text x="50" y="70" text-anchor="middle" font-size="20" font-weight="bold" fill="#000">d4</text>
              </svg>
            </button>
            <button
              class="dice-type-btn aspect-square w-20 h-20 bg-white/10 border-[3px] border-black/30 rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] p-2 text-dice-6 hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-1"
              data-sides="6"
            >
              <svg viewBox="0 0 100 100" class="w-full h-full pointer-events-none">
                <rect x="20" y="20" width="60" height="60" fill="currentColor" stroke="#000" stroke-width="2" />
                <text x="50" y="58" text-anchor="middle" font-size="20" font-weight="bold" fill="#fff">d6</text>
              </svg>
            </button>
            <button
              class="dice-type-btn aspect-square w-20 h-20 bg-white/10 border-[3px] border-black/30 rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] p-2 text-dice-8 hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-1"
              data-sides="8"
            >
              <svg viewBox="0 0 100 100" class="w-full h-full pointer-events-none">
                <polygon points="50,10 85,50 50,90 15,50" fill="currentColor" stroke="#000" stroke-width="2" />
                <text x="50" y="58" text-anchor="middle" font-size="20" font-weight="bold" fill="#fff">d8</text>
              </svg>
            </button>
            <button
              class="dice-type-btn aspect-square w-20 h-20 bg-white/10 border-[3px] border-black/30 rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] p-2 text-dice-10 hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-1"
              data-sides="10"
            >
              <svg viewBox="0 0 100 100" class="w-full h-full pointer-events-none">
                <polygon points="50,5 75,35 70,70 30,70 25,35" fill="currentColor" stroke="#000" stroke-width="2" />
                <polygon points="30,70 50,95 70,70" fill="currentColor" stroke="#000" stroke-width="2" />
                <text x="50" y="52" text-anchor="middle" font-size="18" font-weight="bold" fill="#fff">d10</text>
              </svg>
            </button>
            <button
              class="dice-type-btn aspect-square w-20 h-20 bg-white/10 border-[3px] border-black/30 rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] p-2 text-dice-12 hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-1"
              data-sides="12"
            >
              <svg viewBox="0 0 100 100" class="w-full h-full pointer-events-none">
                <polygon points="50,10 70,25 70,45 50,60 30,45 30,25" fill="currentColor" stroke="#000" stroke-width="2" />
                <polygon points="30,45 20,60 30,75 50,75 50,60" fill="currentColor" stroke="#000" stroke-width="2" />
                <polygon points="50,60 70,75 80,60 70,45" fill="currentColor" stroke="#000" stroke-width="2" />
                <text x="50" y="50" text-anchor="middle" font-size="18" font-weight="bold" fill="#000">d12</text>
              </svg>
            </button>
            <button
              class="dice-type-btn aspect-square w-20 h-20 bg-transparent border-[3px] border-black/30 rounded-xl cursor-pointer transition-all shadow-[0_4px_8px_rgb(0_0_0/0.3)] p-2 text-dice-20 hover:-translate-y-2 hover:shadow-[0_8px_16px_rgb(255_255_255/0.3)] hover:border-white active:-translate-y-1"
              data-sides="20"
            >
              <svg viewBox="0 0 100 100" class="w-full h-full pointer-events-none">
                <polygon points="50,8 75,30 75,55 50,75 25,55 25,30" fill="currentColor" stroke="#000" stroke-width="2" />
                <polygon points="50,8 65,20 50,28 35,20" fill="currentColor" stroke="#000" stroke-width="1.5" />
                <polygon points="50,75 65,65 50,55 35,65" fill="currentColor" stroke="#000" stroke-width="1.5" />
                <text x="50" y="48" text-anchor="middle" font-size="18" font-weight="bold" fill="#000">d20</text>
              </svg>
            </button>
          </div>
        </div>

        <div class="bg-black/40 rounded-xl p-8 min-h-[150px]">
          <div
            id="pool-summary"
            class="text-2xl font-bold text-center py-3 min-h-[2.8rem] empty:hidden text-white"
          ></div>
          <div
            id="dice-pool"
            class="flex gap-1 flex-wrap min-h-[60px] p-4 bg-black/30 rounded-lg justify-center"
          ></div>
          <button
            id="roll-pool-btn"
            disabled
            class="w-full py-5 text-2xl font-semibold text-white rounded-lg cursor-pointer transition-colors bg-[#1e3a5f] hover:bg-[#2a4d7f] disabled:bg-black/30 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-black/30"
          >
            Roll Pool
          </button>
        </div>
      </dice-pool>

      <div class="flex-1 flex flex-col gap-4 w-full">
        <div
          id="dice-box-container"
          class="bg-black/40 rounded-xl overflow-hidden h-[400px] w-full mb-4"
        >
          <!-- 3D Dice animation will render here -->
        </div>
        <div id="roll-history" class="flex flex-col gap-4"></div>
      </div>
    </main>

    <!-- Emoji Reaction Bar (Web Component) -->
    <emoji-buttons class="fixed bottom-4 left-4 flex gap-2 bg-black/60 rounded-xl p-3 border-2 border-white/20">
      <button class="text-4xl hover:scale-125 transition-transform cursor-pointer" data-emoji="👍">👍</button>
      <button class="text-4xl hover:scale-125 transition-transform cursor-pointer" data-emoji="🎉">🎉</button>
      <button class="text-4xl hover:scale-125 transition-transform cursor-pointer" data-emoji="🔥">🔥</button>
      <button class="text-4xl hover:scale-125 transition-transform cursor-pointer" data-emoji="😱">😱</button>
      <button class="text-4xl hover:scale-125 transition-transform cursor-pointer" data-emoji="💀">💀</button>
      <button class="text-4xl hover:scale-125 transition-transform cursor-pointer" data-emoji="❤️">❤️</button>
    </emoji-buttons>

    <script src="bundle.js" type="module"></script>
  </body>
</html>
